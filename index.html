import { useEffect, useState } from "react";
import { motion, AnimatePresence } from "framer-motion";
import "./fonts.css";

/* --------------------------------------------------
   Vladimir Ganshin ‚Äì Apple‚Äëinspired Portfolio Site
   Tech stack: React + Tailwind CSS + Framer Motion
   -------------------------------------------------- */

export default function PortfolioSite() {
  // lock scroll snap behaviour for large hero
  useEffect(() => {
    document.documentElement.style.scrollBehavior = "smooth";
    const link = document.createElement("link");
    link.rel = "stylesheet";
    link.href =
      "https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap";
    document.head.appendChild(link);
    return () => {
      document.documentElement.style.scrollBehavior = "auto";
      document.head.removeChild(link);
    };
  }, []);

  const [dark, setDark] = useState(false);
  const [lang, setLang] = useState('ru');
  const [showTop, setShowTop] = useState(false);

  useEffect(() => {
    const stored = localStorage.getItem('theme');
    if (stored === 'dark') {
      setDark(true);
      document.documentElement.classList.add('dark');
    }
  }, []);

  useEffect(() => {
    if (dark) {
      document.documentElement.classList.add('dark');
      localStorage.setItem('theme', 'dark');
    } else {
      document.documentElement.classList.remove('dark');
      localStorage.setItem('theme', 'light');
    }
  }, [dark]);

  useEffect(() => {
    const onScroll = () => {
      setShowTop(window.scrollY > 400);
    };
    window.addEventListener('scroll', onScroll);
    return () => window.removeEventListener('scroll', onScroll);
  }, []);

  const t = {
    ru: {
      navAbout: '–û–±–æ –º–Ω–µ',
      navProjects: '–ü—Ä–æ–µ–∫—Ç—ã',
      navAchievements: '–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
      navContact: '–ö–æ–Ω—Ç–∞–∫—Ç—ã',
      tagline:
        '–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —Ç–µ—Ö–Ω–æ–ø–∞—Ä–∫–∞ ‚Ä¢ –≠–∫—Å–ø–µ—Ä—Ç –ø–æ –∞–¥–¥–∏—Ç–∏–≤–Ω–æ–º—É –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É ‚Ä¢ –¢—Ä–µ–Ω–µ—Ä WorldSkills',
      portfolio: '–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ',
      contactBtn: '–°–≤—è–∑–∞—Ç—å—Å—è',
      aboutHeader: '–û–±–æ –º–Ω–µ',
      aboutText:
        '–Ø –∏–Ω–∂–µ–Ω–µ—Ä‚Äë–ø—Ä–∞–∫—Ç–∏–∫ —Å –±–æ–ª–µ–µ —á–µ–º 9‚Äë–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è –∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞, 3D‚Äë–ø–µ—á–∞—Ç–∏ –∏ —Ä–µ–≤–µ—Ä—Å–∏–≤–Ω–æ–≥–æ –∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥–∞. –í–æ–∑–≥–ª–∞–≤–ª—è—é —Ç–µ—Ö–Ω–æ–ø–∞—Ä–∫ –†–ì–°–£ —Å 2019 –≥–æ–¥–∞ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –≥–æ—Ç–æ–≤–ª—é –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —á–µ–º–ø–∏–æ–Ω–∞—Ç–æ–≤ –ø—Ä–æ—Ñ–º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞.',
      skills: '–ù–∞–≤—ã–∫–∏',
      software: '–°–æ—Ñ—Ç',
      projectsHeader: '–ü—Ä–æ–µ–∫—Ç—ã',
      achievementsHeader: '–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
      contactHeader: '–°–≤—è–∑–∞—Ç—å—Å—è',
      contactText:
        '–û—Ç–∫—Ä—ã—Ç –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π –∏ —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤. –ù–∞–ø–∏—à–∏—Ç–µ –ø–∏—Å—å–º–æ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —á–µ—Ä–µ–∑ —Å–æ—Ü—Å–µ—Ç–∏.',
    },
    en: {
      navAbout: 'About',
      navProjects: 'Projects',
      navAchievements: 'Achievements',
      navContact: 'Contact',
      tagline:
        'Tech park director ‚Ä¢ Additive manufacturing expert ‚Ä¢ WorldSkills coach',
      portfolio: 'Portfolio',
      contactBtn: 'Contact',
      aboutHeader: 'About',
      aboutText:
        'I am a hands-on engineer with over nine years of teaching and leading educational projects in industrial design, 3D printing and reverse engineering. Since 2019 I head the RSU tech park and regularly prepare winners of national and international skill championships.',
      skills: 'Skills',
      software: 'Software',
      projectsHeader: 'Projects',
      achievementsHeader: 'Achievements',
      contactHeader: 'Get in touch',
      contactText:
        'Open for cooperation, consulting and joint projects. Drop me a line or connect through social networks.',
    },
  }[lang];

  const projects = [
    {
      title: "–ö–æ–º–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –æ–±–≤–µ—Å Kawasaki Puccetti Racing",
      description:
        "–î–∏–∑–∞–π–Ω –∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —É–≥–ª–µ–ø–ª–∞—Å—Ç–∏–∫–æ–≤–æ–≥–æ –æ–±–≤–µ—Å–∞ —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å Umatex (–†–æ—Å–∞—Ç–æ–º).",
      image: "https://source.unsplash.com/random/800x600?motorcycle",
    },
    {
      title: "WorldSkills Russia ‚Äì Reverse Engineering",
      description: "–¢—Ä–µ–Ω–µ—Ä –∫–æ–º–∞–Ω–¥—ã‚Äë–ø—Ä–∏–∑—ë—Ä–∞ —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞ –º–∏—Ä–∞ 2019 (–ö–∞–∑–∞–Ω—å).",
      image: "https://source.unsplash.com/random/800x600?3d-print",
    },
    {
      title: "BRICS Skills Shanghai 2020 ‚Äì Gold",
      description:
        '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —á–µ–º–ø–∏–æ–Ω–∞ –≤ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ "–†–µ–≤–µ—Ä—Å–∏–≤–Ω—ã–π –∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥".',
      image: "https://source.unsplash.com/random/800x600?engineering",
    },
    {
      title: "3D‚Äë–ø–µ—á–∞—Ç—å —Å–ª–æ–∂–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –º–∞–∫–µ—Ç–æ–≤",
      description:
        "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É –º–∞—Å—à—Ç–∞–±–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –∑–¥–∞–Ω–∏–π.",
      image: "https://source.unsplash.com/random/800x600?architecture",
    },
    {
      title: "–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è –ø–æ –∞–¥–¥–∏—Ç–∏–≤–Ω—ã–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º",
      description: "–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤.",
      image: "https://source.unsplash.com/random/800x600?conference",
    },
  ];

  const achievements = [
    "–ë—Ä–æ–Ω–∑–æ–≤–∞—è –º–µ–¥–∞–ª—å ‚Ä¢ –§–∏–Ω–∞–ª —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞ –≤—ã—Å–æ–∫–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, 2023",
    '–ì–ª–∞–≤–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç ‚Ä¢ "–ê–¥–¥–∏—Ç–∏–≤–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ" WorldSkills, 2022',
    "4 —á–µ–º–ø–∏–æ–Ω–∞ –†–æ—Å—Å–∏–∏ –ø–æ –ø—Ä–æ—Ñ–º–∞—Å—Ç–µ—Ä—Å—Ç–≤—É (2019‚Äë2022)",
    "–ß–ª–µ–Ω —É—á—ë–Ω–æ–≥–æ —Å–æ–≤–µ—Ç–∞ –†–ì–°–£ –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–º—É –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é, 2023‚Äë–Ω.–≤.",
    "–õ—É—á—à–∏–π –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ –≥–æ–¥–∞ –ø–æ –≤–µ—Ä—Å–∏–∏ XYZ, 2021",
    "–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –≤—ã—Å—Ç–∞–≤–∫–∏ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤, 2020",
  ];

  return (
    <div className="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-['Montserrat',sans-serif] leading-relaxed">
      {/* ---------- HERO ---------- */}
      <header className="min-h-screen flex flex-col justify-between bg-gradient-to-b from-white via-gray-50 to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-700">
          <nav className="flex justify-between items-center px-6 py-4 md:px-12 max-w-6xl mx-auto">
          <span className="text-xl md:text-2xl font-semibold tracking-tight select-none">
            VG.
          </span>
          <div className="hidden md:flex gap-10 text-sm uppercase">
            <a href="#about" className="hover:text-gray-500 dark:hover:text-gray-300">
              {t.navAbout}
            </a>
            <a href="#projects" className="hover:text-gray-500 dark:hover:text-gray-300">
              {t.navProjects}
            </a>
            <a href="#achievements" className="hover:text-gray-500 dark:hover:text-gray-300">
              {t.navAchievements}
            </a>
            <a href="#contact" className="hover:text-gray-500 dark:hover:text-gray-300">
              {t.navContact}
            </a>
          </div>
          <div className="flex items-center">
            <button
              onClick={() => setLang(lang === 'ru' ? 'en' : 'ru')}
              className="ml-4 p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs uppercase"
              aria-label="Toggle language"
            >
              {lang === 'ru' ? 'EN' : 'RU'}
            </button>
            <button
              onClick={() => setDark(!dark)}
              className="ml-4 p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"
              aria-label="Toggle dark mode"
            >
              {dark ? 'üåô' : '‚òÄÔ∏è'}
            </button>
          </div>
        </nav>

        <motion.div
          initial={{ opacity: 0, y: 40 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 1 }}
          className="flex-grow flex flex-col items-center justify-center text-center px-6 max-w-4xl mx-auto"
        >
          <h1 className="text-5xl md:text-7xl font-bold tracking-tight">
            –í–ª–∞–¥–∏–º–∏—Ä –ì–∞–Ω—å—à–∏–Ω
          </h1>
          <p className="mt-6 max-w-2xl text-lg md:text-xl text-gray-600 dark:text-gray-300">
            {t.tagline}
          </p>
          <img
            src="./Avatar_Ganshin.jpg"
            alt="–í–ª–∞–¥–∏–º–∏—Ä –ì–∞–Ω—å—à–∏–Ω"
            className="mt-8 w-32 h-32 md:w-48 md:h-48 rounded-full object-cover shadow-lg"
          />
          <div className="mt-10 flex gap-4">
            <a
              href="#projects"
              className="px-8 py-3 rounded-full bg-black text-white hover:bg-gray-800 transition"
            >
              {t.portfolio}
            </a>
            <a
              href="#contact"
              className="px-8 py-3 rounded-full border border-gray-900 hover:bg-gray-100 transition"
            >
              {t.contactBtn}
            </a>
          </div>
        </motion.div>

          <div
            className="flex justify-center pb-10 animate-bounce"
            aria-hidden="true"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              className="w-6 h-6 text-gray-400 dark:text-gray-500"
              fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={1.5}
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </div>
      </header>

      {/* ---------- ABOUT ---------- */}
      <section id="about" className="py-24 bg-gray-50 dark:bg-gray-800 px-6 md:px-0">
        <div className="max-w-4xl mx-auto">
          <h2 className="text-3xl md:text-4xl font-semibold mb-6">{t.aboutHeader}</h2>
          <p className="text-lg text-gray-700 dark:text-gray-300">
            {t.aboutText}
          </p>

          <div className="grid md:grid-cols-2 gap-10 mt-12">
            <div>
              <h3 className="text-2xl font-medium mb-4">{t.skills}</h3>
              <ul className="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300">
                <li>CAD/CAM/CAE‚Äë–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
                <li>–ê–¥–¥–∏—Ç–∏–≤–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ (FDM, DLP, SLA)</li>
                <li>–†–µ–≤–µ—Ä—Å–∏–≤–Ω—ã–π –∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥</li>
                <li>–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω –∏ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (–ß–ü–£)</li>
              </ul>
            </div>
            <div>
              <h3 className="text-2xl font-medium mb-4">{t.software}</h3>
              <ul className="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300">
                <li>Autodesk Inventor, Fusion 360, T‚ÄëFLEX CAD</li>
                <li>Geomagic Design X, GOM Inspect</li>
                <li>Ultimaker Cura, CHITUBOX, Creality Slicer</li>
                <li>Artec Studio, RV 3D Studio</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      {/* ---------- PROJECTS ---------- */}
      <section id="projects" className="py-24 px-6 md:px-0">
        <div className="max-w-6xl mx-auto">
          <h2 className="text-3xl md:text-4xl font-semibold mb-12 text-center">
            {t.projectsHeader}
          </h2>
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-12">
            {projects.map((proj, idx) => (
              <motion.div
                key={idx}
                initial={{ opacity: 0, y: 20 }}
                whileInView={{ opacity: 1, y: 0 }}
                viewport={{ once: true }}
                transition={{ duration: 0.5, delay: idx * 0.1 }}
                className="rounded-3xl overflow-hidden shadow-lg bg-white dark:bg-gray-800 hover:shadow-2xl transition"
              >
                <img
                  src={proj.image}
                  alt={`–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ ${proj.title}`}
                  className="w-full h-56 object-cover"
                />
                <div className="p-6">
                  <h3 className="text-xl font-medium mb-2">{proj.title}</h3>
                  <p className="text-gray-600 dark:text-gray-300 text-sm leading-relaxed">
                    {proj.description}
                  </p>
                </div>
              </motion.div>
            ))}
          </div>
        </div>
      </section>

      {/* ---------- ACHIEVEMENTS ---------- */}
      <section id="achievements" className="py-24 bg-gray-50 dark:bg-gray-800 px-6 md:px-0">
        <div className="max-w-4xl mx-auto">
          <h2 className="text-3xl md:text-4xl font-semibold mb-6">
            {t.achievementsHeader}
          </h2>
          <ul className="space-y-4 text-gray-700 dark:text-gray-300 text-lg">
            {achievements.map((ach, i) => (
              <li key={i} className="pl-6 relative">
                <span className="absolute left-0 top-2 w-2 h-2 rounded-full bg-gray-800 dark:bg-gray-600" />
                {ach}
              </li>
            ))}
          </ul>
        </div>
      </section>

      {/* ---------- CONTACT ---------- */}
      <section id="contact" className="py-24 px-6 md:px-0">
        <div className="max-w-3xl mx-auto text-center">
          <h2 className="text-3xl md:text-4xl font-semibold mb-6">{t.contactHeader}</h2>
          <p className="text-lg text-gray-700 dark:text-gray-300 mb-10">
            {t.contactText}
          </p>
          <div className="flex justify-center gap-8 text-gray-900 dark:text-gray-100 text-2xl">
            <a href="mailto:example@example.com" className="hover:opacity-70">
              E‚Äëmail
            </a>
            <a
              href="https://t.me/STEP_3D_news"
              className="hover:opacity-70"
              target="_blank"
              rel="noreferrer"
            >
              Telegram
            </a>
            <a
              href="https://www.linkedin.com/"
              className="hover:opacity-70"
              target="_blank"
              rel="noreferrer"
            >
              LinkedIn
            </a>
            <a
              href="https://github.com/"
              className="hover:opacity-70"
              target="_blank"
              rel="noreferrer"
            >
              GitHub
            </a>
          </div>
        </div>
      </section>

      {/* ---------- FOOTER ---------- */}
      <footer className="py-10 text-center text-sm text-gray-500 dark:text-gray-400">
        ¬© {new Date().getFullYear()} –í–ª–∞–¥–∏–º–∏—Ä –ì–∞–Ω—å—à–∏–Ω
      </footer>
      <AnimatePresence>
        {showTop && (
          <motion.button
            onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
            initial={{ opacity: 0, scale: 0.5 }}
            animate={{ opacity: 1, scale: 1 }}
            exit={{ opacity: 0, scale: 0.5 }}
            className="fixed bottom-6 right-6 p-3 rounded-full bg-black text-white dark:bg-gray-700 dark:text-gray-100 shadow-lg"
          >
            ‚Üë
          </motion.button>
        )}
      </AnimatePresence>
    </div>
  );
}
